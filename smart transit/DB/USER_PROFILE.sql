

DROP TABLE USER_PROFILE FORCE;
DROP SEQUENCE user_id_seq;
DROP TRIGGER user_id_trigger;
DROP TRIGGER user_age_trigger;

CREATE SEQUENCE user_id_seq
START WITH 1
INCREMENT BY 1
NOCACHE;


CREATE TABLE USER_PROFILE (
    USER_ID VARCHAR2(20) PRIMARY KEY,
    NAME VARCHAR2(100) NOT NULL,
    EMAIL VARCHAR2(100) NOT NULL,
    PHONE VARCHAR2(20),
    CARD_ID VARCHAR2(50) NOT NULL,
    BALANCE NUMBER(10, 2) NOT NULL,
    DOB TIMESTAMP NOT NULL,
    PASSWORD VARCHAR2(100) NOT NULL,
    AGE NUMBER(3), -- Direct column for age
    ADDRESS VARCHAR2(200) NOT NULL
);



-- Trigger to generate USER_ID


CREATE OR REPLACE TRIGGER user_id_trigger
BEFORE INSERT ON USER_PROFILE
FOR EACH ROW
WHEN (NEW.USER_ID IS NULL)
BEGIN
  :NEW.USER_ID := 'U' || LPAD(user_id_seq.NEXTVAL, 6, '0');
END;
/


CREATE OR REPLACE TRIGGER user_age_trigger
BEFORE INSERT OR UPDATE ON USER_PROFILE
FOR EACH ROW
BEGIN
  :NEW.AGE := FLOOR(MONTHS_BETWEEN(SYSDATE, :NEW.DOB) / 12);
END;
/


-- Insert 1st User (without specifying USER_ID)
INSERT INTO USER_PROFILE (NAME, EMAIL, PHONE, CARD_ID, BALANCE, DOB, ADDRESS, PASSWORD)
VALUES ('John Doe', 'john.doe@example.com', '+123456789', '520028A3A0', 500, TO_TIMESTAMP('1996-04-12 10:00:00', 'YYYY-MM-DD HH24:MI:SS'), '123 Street, City, Country', '123');

-- Insert 2nd User
INSERT INTO USER_PROFILE (NAME, EMAIL, PHONE, CARD_ID, BALANCE, DOB, ADDRESS,PASSWORD)
VALUES ('Jane Smith', 'jane.smith@example.com', '+987654321', '520028B840', 1000, TO_TIMESTAMP('1992-05-15 09:30:00', 'YYYY-MM-DD HH24:MI:SS'), '456 Avenue, Town, Country', '123');

-- Insert 3rd User with unique data
INSERT INTO USER_PROFILE (NAME, EMAIL, PHONE, CARD_ID, BALANCE, DOB, ADDRESS, PASSWORD)
VALUES ('Mike Johnson', 'mike.johnson@example.com', '+1122334450', '520026D872', 750, TO_TIMESTAMP('1998-02-22 08:15:00', 'YYYY-MM-DD HH24:MI:SS'), '789 Boulevard, City, Country', '123');

-- Insert 4th User with unique data
INSERT INTO USER_PROFILE (NAME, EMAIL, PHONE, CARD_ID, BALANCE, DOB, ADDRESS, PASSWORD)
VALUES ('Chris Johnson', 'chris.johnson@example.com', '+1122334460', '520028E289', 750, TO_TIMESTAMP('1995-01-10 08:30:00', 'YYYY-MM-DD HH24:MI:SS'), '789 Boulevard, City, Country', '123');

-- Insert 5th User with unique data
INSERT INTO USER_PROFILE (NAME, EMAIL, PHONE, CARD_ID, BALANCE, DOB, ADDRESS, PASSWORD)
VALUES ('Alex Johnson', 'alex.johnson@example.com', '+1122334470', '4400309616', 750, TO_TIMESTAMP('1997-03-05 10:15:00', 'YYYY-MM-DD HH24:MI:SS'), '789 Boulevard, City, Country', '123');

-- Insert 6th User with unique data
INSERT INTO USER_PROFILE (NAME, EMAIL, PHONE, CARD_ID, BALANCE, DOB, ADDRESS, PASSWORD)
VALUES ('Sam Johnson', 'sam.johnson@example.com', '+1122334480', '440030755A', 750, TO_TIMESTAMP('1999-08-22 07:45:00', 'YYYY-MM-DD HH24:MI:SS'), '789 Boulevard, City, Country', '123');

-- Insert 7th User with unique data
INSERT INTO USER_PROFILE (NAME, EMAIL, PHONE, CARD_ID, BALANCE, DOB, ADDRESS, PASSWORD)
VALUES ('Jordan Johnson', 'jordan.johnson@example.com', '+1122334490', '4400306E65', 750, TO_TIMESTAMP('1996-12-30 06:00:00', 'YYYY-MM-DD HH24:MI:SS'), '789 Boulevard, City, Country', '123');

-- Insert 8th User with unique data
INSERT INTO USER_PROFILE (NAME, EMAIL, PHONE, CARD_ID, BALANCE, DOB, ADDRESS, PASSWORD)
VALUES ('Taylor Johnson', 'taylor.johnson@example.com', '+1122334400', '4400305056', 750, TO_TIMESTAMP('2000-07-18 09:00:00', 'YYYY-MM-DD HH24:MI:SS'), '789 Boulevard, City, Country', '123');

-- Insert 9th User with unique data
INSERT INTO USER_PROFILE (NAME, EMAIL, PHONE, CARD_ID, BALANCE, DOB, ADDRESS, PASSWORD)
VALUES ('Casey Johnson', 'casey.johnson@example.com', '+1122334410', '52002925B2', 750, TO_TIMESTAMP('1994-11-11 08:50:00', 'YYYY-MM-DD HH24:MI:SS'), '789 Boulevard, City, Country', '123');

-- Insert 10th User with unique data
INSERT INTO USER_PROFILE (NAME, EMAIL, PHONE, CARD_ID, BALANCE, DOB, ADDRESS, PASSWORD)
VALUES ('Jamie Doe', 'hemalhemal787@gmail.com', '+1122334420', '520028F91B', 750, TO_TIMESTAMP('1991-06-25 05:30:00', 'YYYY-MM-DD HH24:MI:SS'), '789 Boulevard, City, Country', '123');
